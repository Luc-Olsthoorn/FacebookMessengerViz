(this.webpackJsonpFacebookMessengerViz=this.webpackJsonpFacebookMessengerViz||[]).push([[0],{362:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n(1),r=n.n(a),c=n(55),i=n.n(c),o=n(10),u=n(8),d=n(40),l=n.n(d),j=n(22),m=n(135),h=n(12),b=n(9),f=n.n(b),O=["#72a1e5","#eca400","#2e382e","#9883e5","#fcd3de","#f038ff","#ef709d","#e2ef70","#49111c"],x={Month:2592e6,Week:6048e5};function p(e){var t=e.messages,n=Object(a.useState)([]),r=Object(u.a)(n,2),c=r[0],i=r[1],d=Object(a.useState)([]),l=Object(u.a)(d,2),j=l[0],b=l[1],p=Object(a.useState)("Month"),g=Object(u.a)(p,2),v=g[0];g[1];return Object(a.useEffect)((function(){var e=function(e){var t,n=e.messages,s=e.timeInterval,a=[],r=(n=n.sort((function(e,t){return e.timestamp_ms<t.timestamp_ms?-1:1})))[0].timestamp_ms,c={},i={},u=Object(m.a)(n);try{for(u.s();!(t=u.n()).done;){var d=t.value;c[r]=c[r]||{},c[r].name=f()(r).format("MMM YYYY"),d.timestamp_ms<Number(r)+Number(s)?(c[r][d.sender_name]=c[r][d.sender_name]+1||1,i[d.sender_name]=0):(a.push(Object(o.a)(Object(o.a)({},i),c[r])),r+=s)}}catch(j){u.e(j)}finally{u.f()}a.push(Object(o.a)(Object(o.a)({},i),c[r]));var l=Object.keys(i);return console.log(a),{data:a,peopleList:l}}({messages:t,timeInterval:x[v]}),n=e.peopleList,s=e.data;b(n),i(s)}),[t]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Interactions over time:"}),Object(s.jsx)(h.f,{width:"95%",height:400,children:Object(s.jsxs)(h.e,{style:{padding:"1rem",fontWeight:"300"},data:c,syncId:"main",margin:{top:5,right:30,left:20,bottom:5},children:[Object(s.jsx)(h.b,{strokeDasharray:"3 3",stroke:"white"}),Object(s.jsx)(h.h,{dataKey:"name",stroke:"white"}),Object(s.jsx)(h.i,{stroke:"white"}),Object(s.jsx)(h.g,{contentStyle:{backgroundColor:"white",color:"black"},cursor:{stroke:"white",strokeWidth:2},animationDuration:30}),Object(s.jsx)(h.c,{}),Object(s.jsx)(h.a,{dataKey:"name",data:c,fill:"#50C9CE",stroke:"white",margin:{top:5,right:30,left:30,bottom:5},children:Object(s.jsx)(h.e,{children:j.map((function(e,t){return Object(s.jsx)(h.d,{type:"monotone",dataKey:e,strokeWidth:1,dot:!1,activeDot:!1,stroke:O[t]||"black"})}))})}),j.map((function(e,t){return Object(s.jsx)(h.d,{type:"monotone",dataKey:e,strokeWidth:2,dot:!1,activeDot:!1,stroke:O[t]||"black"})}))]})})]})}function g(e){var t=e.messages,n={},a=0;t.forEach((function(e){var t=f()(e.timestamp_ms),s=t.day(),r=t.hour();n[s]=n[s]||{},n[s][r]=n[s][r]+1||1,n[s][r]>a&&(a=n[s][r])}));var r=[{num:0,text:"S"},{num:1,text:"M"},{num:2,text:"T"},{num:3,text:"W"},{num:4,text:"T"},{num:5,text:"F"},{num:6,text:"S"}];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Heatmap of Interactions"}),Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{}),r.map((function(e){return Object(s.jsx)("td",{style:{textAlign:"center"},children:e.text})}))]}),[{num:0,text:"12:00 a.m."},{num:1,text:"1:00 a.m."},{num:2,text:"2:00 a.m."},{num:3,text:"3:00 a.m."},{num:4,text:"4:00 a.m."},{num:5,text:"5:00 a.m."},{num:6,text:"6:00 a.m."},{num:7,text:"7:00 a.m."},{num:8,text:"8:00 a.m."},{num:9,text:"9:00 a.m."},{num:10,text:"10:00 a.m."},{num:11,text:"11:00 a.m."},{num:12,text:"12:00 p.m."},{num:13,text:"1:00 p.m."},{num:14,text:"2:00 p.m."},{num:15,text:"3:00 p.m."},{num:16,text:"4:00 p.m."},{num:17,text:"5:00 p.m."},{num:18,text:"6:00 p.m."},{num:19,text:"7:00 p.m."},{num:20,text:"8:00 p.m."},{num:21,text:"9:00 p.m."},{num:22,text:"10:00 p.m."},{num:23,text:"11:00 p.m."}].map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.text}),r.map((function(t){var r=0;return n[t.num]&&n[t.num][e.num]&&(r=n[t.num][e.num]),Object(s.jsx)("td",{style:{backgroundColor:"rgba(239, 112, 157, ".concat(r/a,")"),padding:".5rem 1rem .5rem 1rem"}})}))]})}))]})]})}var v=n(145),y=n.n(v),w=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function S(e){var t=e.messages,n=Object(a.useState)(0),r=Object(u.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),d=Object(u.a)(o,2),j=d[0],m=d[1],h=Object(a.useState)([]),b=Object(u.a)(h,2),f=b[0],O=b[1],x=Object(a.useState)(10),p=Object(u.a)(x,2),g=p[0],v=p[1],S=Object(a.useState)(10),k=Object(u.a)(S,2),W=k[0],C=k[1];return Object(a.useEffect)((function(){setTimeout((function(){var e=function(e){var t=e.messages,n=0,s={};t.forEach((function(e){var t,a;null===(t=e.content)||void 0===t||t.length;var r=(null===(a=e.content)||void 0===a?void 0:a.split(" "))||[];n+=r.length,r.forEach((function(e){var t=e.toLowerCase().replace(".","").replace(",","").replace("?","");t&&(s[t]=s[t]+1||1)}))}));var a=Object.entries(s);a.sort((function(e,t){var n=Object(u.a)(e,2),s=(n[0],n[1]),a=Object(u.a)(t,2);return a[0],s>a[1]?-1:1}));var r=[];return a.forEach((function(e){var t=Object(u.a)(e,2),n=t[0],s=t[1],a=n;try{a=y.a.decode(n)}catch(c){}a.match(w)&&r.push([a,s])})),{totalWords:n,wordList:a,emojiList:r}}({messages:t}),n=e.totalWords,s=e.wordList,a=e.emojiList;m(s),i(n),O(a)}),200)}),[t]),Object(s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(s.jsxs)("div",{style:{width:"50%",padding:"1rem"},children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Here are your most popular words:"}),Object(s.jsx)("div",{style:{height:"200px",width:"100%",overflowY:"auto",overFlowX:"hidden",margin:"1rem",maxWidth:"400px"},children:Object(s.jsx)(l.a,{pageStart:0,loadMore:function(){v(g+10)},hasMore:g<j.length,loader:Object(s.jsx)("div",{className:"loader",children:"Loading ..."},0),useWindow:!1,children:j.slice(0,g).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],r=n[1];return Object(s.jsxs)("div",{style:{fontSize:"1.25rem"},children:[t+1,". ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:a}),", ",Object(s.jsxs)("span",{style:{fontWeight:"200"},children:[r," times"]})]})}))})}),Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Here are your most popular emojis:"}),Object(s.jsx)("div",{style:{height:"200px",width:"100%",overflowY:"auto",overFlowX:"hidden",margin:"1rem",maxWidth:"400px"},children:Object(s.jsx)(l.a,{pageStart:0,loadMore:function(){C(W+10)},hasMore:W<f.length,loader:Object(s.jsx)("div",{className:"loader",children:"Loading ..."},0),useWindow:!1,children:f.slice(0,W).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],r=n[1];return Object(s.jsxs)("div",{style:{fontSize:"1.25rem"},children:[t+1,". ",a,", ",Object(s.jsxs)("span",{style:{fontWeight:"200"},children:[r," times"]})]})}))})})]}),Object(s.jsxs)("div",{style:{width:"50%",padding:"1rem"},children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Word usage:"}),Object(s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"300"},children:["You have said ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:c})," words to each other. Each message has an average length of ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:Math.ceil(c/t.length)})," words."]})]})]})}function k(e){var t=e.data;return Object(s.jsx)("div",{style:{width:"50%",backgroundColor:"#50C9CE",color:"white",height:"100vh",overflowY:"auto"},children:Object(s.jsxs)("div",{style:{padding:"2rem"},children:[Object(s.jsxs)("h1",{style:{padding:"1rem",fontWeight:"100",textAlign:"center",fontSize:"3rem"},children:["Stats for ",t.title,":"]}),Object(s.jsx)("hr",{style:{borderTop:"1px solid white"}}),(null===t||void 0===t?void 0:t.messages)?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p,{messages:t.messages}),Object(s.jsxs)("div",{style:{display:"flex",paddingTop:"3rem",alignItems:"center"},children:[Object(s.jsx)("div",{style:{width:"50%",padding:"1rem"},children:Object(s.jsx)(W,{messages:t.messages})}),Object(s.jsx)("div",{style:{width:"50%",padding:"1rem"},children:Object(s.jsx)(g,{messages:t.messages})})]}),Object(s.jsx)(S,{messages:t.messages})]}):Object(s.jsx)(s.Fragment,{})]})})}function W(e){var t=e.messages;t=t.sort((function(e,t){return e.timestamp_ms<t.timestamp_ms?-1:1}));var n=Math.ceil(t.length/((t[t.length-1].timestamp_ms-t[0].timestamp_ms)/864e5)),a=f.a.duration(f()(t[t.length-1].timestamp_ms).diff(f()(t[0].timestamp_ms))).humanize(),r=t.filter((function(e){return"Call"===e.type})).length,c=f.a.duration(f()(1e3*t.filter((function(e){return"Call"===e.type})).reduce((function(e,t){return e+t.call_duration}),0)).diff(f()(0))).humanize(),i=f.a.duration(f()(1e3*t.filter((function(e){return"Call"===e.type})).reduce((function(e,t){return e+t.call_duration}),0)/r).diff(f()(0))).humanize(),o=f.a.duration(f()(1e3*Math.max.apply(Math,Object(j.a)(t.filter((function(e){return"Call"===e.type})).map((function(e){return e.call_duration}))))).diff(f()(0))).humanize();return Object(s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"300"},children:["You have spent ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:a})," interacting with each other, sharing an average of about ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:n})," interactions a day",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),t.find((function(e){return"Call"===e.type}))?Object(s.jsxs)(s.Fragment,{children:["You have called each other ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:r})," times, averaging ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:i})," each time and about ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:c})," in total",Object(s.jsx)("br",{}),"One time you spoke for ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:o})]}):Object(s.jsx)(s.Fragment,{children:"You have never called each other"})]})}var C=n(87),E=n.n(C),F=n(146);function M(e){var t=e.setAllMessages,n=Object(a.useState)(0),r=Object(u.a)(n,2),c=r[0],i=r[1],d=Object(a.useState)(0),l=Object(u.a)(d,2),m=l[0],h=l[1],b=Object(a.useState)([]),f=Object(u.a)(b,2),O=f[0],x=f[1],p=function(e){x((function(t){return[].concat(Object(j.a)(t),[e])}))};return Object(a.useEffect)((function(){if(c===m){for(var e=function(e){var t=O[e],s=O.findIndex((function(n,s){return n.thread_path===t.thread_path&&s!==e}));s&&-1!==s&&(O[s]=Object(o.a)(Object(o.a)({},O[s]),{},{messages:[].concat(Object(j.a)(O[s].messages),Object(j.a)(t.messages))}),O.splice(e,1),e-=1),n=e},n=0;n<O.length;n++)e(n);t(O)}}),[c,m,O]),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"file",type:"file",name:"file",onChange:function(e){!function(e){var t=e.files,n=e.setCount,s=e.addThreadRaw,a=e.setTotal,r=Object(j.a)(t).filter((function(e){return e.name.endsWith(".json")})).filter((function(e){return e.name.startsWith("message_")}));a(r.length),r.forEach((function(e,t){var a=new FileReader;a.onload=function(){var e=Object(F.a)(E.a.mark((function e(r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){var e=a.result,r=JSON.parse(e);s(r),n(t+1)}),10);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(e)}))}({files:e.target.files,setCount:i,addThreadRaw:p,setTotal:h})},directory:"",webkitdirectory:""}),c," / ",m]})}function _(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(u.a)(c,2),d=i[0],j=i[1],m=Object(a.useState)([]),h=Object(u.a)(m,2),b=h[0],f=h[1],O=Object(a.useState)({sortBy:{count:!0},filterBy:"",items:10}),x=Object(u.a)(O,2),p=x[0],g=x[1];return Object(a.useEffect)((function(){var e=n.map((function(e){var t={};return e.messages.forEach((function(e){t[e.sender_name]=t[e.sender_name]+1||1})),Object(o.a)(Object(o.a)({},e),{},{count:e.messages.length,messageSplit:t})})).sort((function(e,t){return p.sortBy.count?e.count>t.count?-1:1:0})).filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.title)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(p.filterBy.toLowerCase())}));g(Object(o.a)(Object(o.a)({},p),{},{items:10})),f(e)}),[n,p.sortBy,p.filterBy]),Object(s.jsxs)("div",{style:{display:"flex"},children:[Object(s.jsx)(M,{setAllMessages:r}),Object(s.jsxs)("div",{style:{width:"50%",height:"100vh"},children:[Object(s.jsxs)("div",{style:{padding:"2rem",height:"90%"},children:[Object(s.jsx)("input",{style:{border:"#EF709D",borderWidth:"1px",borderStyle:"solid",height:"1.5rem",paddingLeft:"1rem",borderRadius:"1rem"},type:"text",name:"search",value:p.filterBy,onChange:function(e){g(Object(o.a)(Object(o.a)({},p),{},{filterBy:e.target.value}))}}),Object(s.jsx)("div",{style:{overflowY:"auto",height:"100%"},children:Object(s.jsx)(l.a,{pageStart:0,loadMore:function(){g(Object(o.a)(Object(o.a)({},p),{},{items:p.items+10}))},hasMore:p.items<b.length,loader:Object(s.jsx)(s.Fragment,{}),style:{display:"flex",flexWrap:"wrap"},useWindow:!1,children:b.slice(0,p.items).map((function(e,t){var n=e.title,a=e.messageSplit,r=e.count;e.id;return Object(s.jsxs)("div",{style:{backgroundColor:"#9883E5",width:"10rem",margin:"1rem",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",flexDirection:"column",cursor:"pointer"},onClick:function(){j(b[t])},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:n}),Object(s.jsxs)("div",{style:{paddingTop:"1rem"},children:[Object(s.jsx)("p",{children:"Total messages:"}),Object(s.jsx)("h2",{style:{fontWeight:"100",padding:"1rem",textAlign:"center"},children:r})]})]}),Object(s.jsx)(D,{messageSplit:a,count:r})]})}))})})]}),Object(s.jsxs)("div",{style:{textAlign:"center"},children:["Made with \u2764\ufe0f by ",Object(s.jsx)("a",{href:"www.lucolsthoorn.com",children:"Luc Olsthoorn"})]})]}),d?Object(s.jsx)(k,{data:d,close:function(){j(!1)}}):Object(s.jsx)(s.Fragment,{})]})}var D=function(e){var t=e.messageSplit,n=e.count,r=Object(a.useState)(!1),c=Object(u.a)(r,2),i=c[0],o=(c[1],n/6);return Object(s.jsx)("div",{style:{height:i?"100%":"5rem",overflowY:"auto"},children:Object.keys(t).sort((function(e,n){return t[e]>t[n]?-1:1})).map((function(e){return Object(s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:".25rem"},children:[Object(s.jsx)("div",{style:{width:"".concat(t[e]/o,"rem"),backgroundColor:"#50C9CE",height:"1.25rem"}}),Object(s.jsx)("div",{style:{fontSize:".75rem"},children:e})]})}))})};n(362);i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(_,{})}),document.getElementById("root"))}},[[363,1,2]]]);
//# sourceMappingURL=main.216356ac.chunk.js.map