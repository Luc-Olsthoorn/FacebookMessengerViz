(this.webpackJsonpFacebookMessengerViz=this.webpackJsonpFacebookMessengerViz||[]).push([[0],{362:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var s=n(2),r=n(1),c=n.n(r),i=n(55),a=n.n(i),o=n(10),l=n(8),d=n(40),u=n.n(d),j=n(22),h=n(135),m=n(12),b=n(9),f=n.n(b),O=["#72a1e5","#eca400","#2e382e","#9883e5","#fcd3de","#f038ff","#ef709d","#e2ef70","#49111c"],x={Month:2592e6,Week:6048e5};function p(e){var t=e.messages,n=Object(r.useState)([]),c=Object(l.a)(n,2),i=c[0],a=c[1],d=Object(r.useState)([]),u=Object(l.a)(d,2),j=u[0],b=u[1],p=Object(r.useState)("Month"),g=Object(l.a)(p,2),y=g[0];g[1];return Object(r.useEffect)((function(){var e=function(e){var t,n=e.messages,s=e.timeInterval,r=[],c=(n=n.sort((function(e,t){return e.timestamp_ms<t.timestamp_ms?-1:1})))[0].timestamp_ms,i={},a={},l=Object(h.a)(n);try{for(l.s();!(t=l.n()).done;){var d=t.value;i[c]=i[c]||{},i[c].name=f()(c).format("MMM YYYY"),d.timestamp_ms<Number(c)+Number(s)?(i[c][d.sender_name]=i[c][d.sender_name]+1||1,a[d.sender_name]=0):(r.push(Object(o.a)(Object(o.a)({},a),i[c])),c+=s)}}catch(j){l.e(j)}finally{l.f()}r.push(Object(o.a)(Object(o.a)({},a),i[c]));var u=Object.keys(a);return console.log(r),{data:r,peopleList:u}}({messages:t,timeInterval:x[y]}),n=e.peopleList,s=e.data;b(n),a(s)}),[t]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Interactions over time:"}),Object(s.jsx)(m.f,{width:"95%",height:400,children:Object(s.jsxs)(m.e,{style:{padding:"1rem",fontWeight:"300"},data:i,syncId:"main",margin:{top:5,right:30,left:20,bottom:5},children:[Object(s.jsx)(m.b,{strokeDasharray:"3 3",stroke:"white"}),Object(s.jsx)(m.h,{dataKey:"name",stroke:"white"}),Object(s.jsx)(m.i,{stroke:"white"}),Object(s.jsx)(m.g,{contentStyle:{backgroundColor:"white",color:"black"},cursor:{stroke:"white",strokeWidth:2},animationDuration:30}),Object(s.jsx)(m.c,{}),Object(s.jsx)(m.a,{dataKey:"name",data:i,fill:"#50C9CE",stroke:"white",margin:{top:5,right:30,left:30,bottom:5},children:Object(s.jsx)(m.e,{children:j.map((function(e,t){return Object(s.jsx)(m.d,{type:"monotone",dataKey:e,strokeWidth:1,dot:!1,activeDot:!1,stroke:O[t]||"black"})}))})}),j.map((function(e,t){return Object(s.jsx)(m.d,{type:"monotone",dataKey:e,strokeWidth:2,dot:!1,activeDot:!1,stroke:O[t]||"black"})}))]})})]})}function g(e){var t=e.messages,n={},r=0;t.forEach((function(e){var t=f()(e.timestamp_ms),s=t.day(),c=t.hour();n[s]=n[s]||{},n[s][c]=n[s][c]+1||1,n[s][c]>r&&(r=n[s][c])}));var c=[{num:0,text:"S"},{num:1,text:"M"},{num:2,text:"T"},{num:3,text:"W"},{num:4,text:"T"},{num:5,text:"F"},{num:6,text:"S"}];return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Heatmap of Interactions"}),Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{}),c.map((function(e){return Object(s.jsx)("td",{style:{textAlign:"center"},children:e.text})}))]}),[{num:0,text:"12:00 a.m."},{num:1,text:"1:00 a.m."},{num:2,text:"2:00 a.m."},{num:3,text:"3:00 a.m."},{num:4,text:"4:00 a.m."},{num:5,text:"5:00 a.m."},{num:6,text:"6:00 a.m."},{num:7,text:"7:00 a.m."},{num:8,text:"8:00 a.m."},{num:9,text:"9:00 a.m."},{num:10,text:"10:00 a.m."},{num:11,text:"11:00 a.m."},{num:12,text:"12:00 p.m."},{num:13,text:"1:00 p.m."},{num:14,text:"2:00 p.m."},{num:15,text:"3:00 p.m."},{num:16,text:"4:00 p.m."},{num:17,text:"5:00 p.m."},{num:18,text:"6:00 p.m."},{num:19,text:"7:00 p.m."},{num:20,text:"8:00 p.m."},{num:21,text:"9:00 p.m."},{num:22,text:"10:00 p.m."},{num:23,text:"11:00 p.m."}].map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.text}),c.map((function(t){var c=0;return n[t.num]&&n[t.num][e.num]&&(c=n[t.num][e.num]),Object(s.jsx)("td",{style:{backgroundColor:"rgba(239, 112, 157, ".concat(c/r,")"),padding:".5rem 1rem .5rem 1rem"}})}))]})}))]})]})}var y=n(145),v=n.n(y),w=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function k(e){var t=e.messages,n=Object(r.useState)(0),c=Object(l.a)(n,2),i=c[0],a=c[1],o=Object(r.useState)([]),d=Object(l.a)(o,2),j=d[0],h=d[1],m=Object(r.useState)([]),b=Object(l.a)(m,2),f=b[0],O=b[1],x=Object(r.useState)(10),p=Object(l.a)(x,2),g=p[0],y=p[1],k=Object(r.useState)(10),S=Object(l.a)(k,2),W=S[0],E=S[1];return Object(r.useEffect)((function(){setTimeout((function(){var e=function(e){var t=e.messages,n=0,s={};t.forEach((function(e){var t,r;null===(t=e.content)||void 0===t||t.length;var c=(null===(r=e.content)||void 0===r?void 0:r.split(" "))||[];n+=c.length,c.forEach((function(e){var t=e.toLowerCase().replace(".","").replace(",","").replace("?","");t&&(s[t]=s[t]+1||1)}))}));var r=Object.entries(s);r.sort((function(e,t){var n=Object(l.a)(e,2),s=(n[0],n[1]),r=Object(l.a)(t,2);return r[0],s>r[1]?-1:1}));var c=[];return r.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],s=t[1],r=n;try{r=v.a.decode(n)}catch(i){}r.match(w)&&c.push([r,s])})),{totalWords:n,wordList:r,emojiList:c}}({messages:t}),n=e.totalWords,s=e.wordList,r=e.emojiList;h(s),a(n),O(r)}),200)}),[t]),Object(s.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(s.jsxs)("div",{style:{width:"50%",padding:"1rem"},children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Here are your most popular words:"}),Object(s.jsx)("div",{style:{height:"200px",width:"100%",overflowY:"auto",overFlowX:"hidden",margin:"1rem",maxWidth:"400px"},children:Object(s.jsx)(u.a,{pageStart:0,loadMore:function(){y(g+10)},hasMore:g<j.length,loader:Object(s.jsx)("div",{className:"loader",children:"Loading ..."},0),useWindow:!1,children:j.slice(0,g).map((function(e,t){var n=Object(l.a)(e,2),r=n[0],c=n[1];return Object(s.jsxs)("div",{style:{fontSize:"1.25rem"},children:[t+1,". ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:r}),", ",Object(s.jsxs)("span",{style:{fontWeight:"200"},children:[c," times"]})]})}))})}),Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Here are your most popular emojis:"}),Object(s.jsx)("div",{style:{height:"200px",width:"100%",overflowY:"auto",overFlowX:"hidden",margin:"1rem",maxWidth:"400px"},children:Object(s.jsx)(u.a,{pageStart:0,loadMore:function(){E(W+10)},hasMore:W<f.length,loader:Object(s.jsx)("div",{className:"loader",children:"Loading ..."},0),useWindow:!1,children:f.slice(0,W).map((function(e,t){var n=Object(l.a)(e,2),r=n[0],c=n[1];return Object(s.jsxs)("div",{style:{fontSize:"1.25rem"},children:[t+1,". ",r,", ",Object(s.jsxs)("span",{style:{fontWeight:"200"},children:[c," times"]})]})}))})})]}),Object(s.jsxs)("div",{style:{width:"50%",padding:"1rem"},children:[Object(s.jsx)("h3",{style:{fontWeight:"300"},children:"Word usage:"}),Object(s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"300"},children:["You have said ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:i})," words to each other. Each message has an average length of ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:Math.ceil(i/t.length)})," words."]})]})]})}function S(e){var t=e.data;return Object(s.jsx)("div",{style:{width:"50%",backgroundColor:"#50C9CE",color:"white",height:"100vh",overflowY:"auto"},children:Object(s.jsxs)("div",{style:{padding:"2rem"},children:[Object(s.jsxs)("h1",{style:{padding:"1rem",fontWeight:"100",textAlign:"center",fontSize:"3rem"},children:["Stats for ",t.title,":"]}),Object(s.jsx)("hr",{style:{borderTop:"1px solid white"}}),(null===t||void 0===t?void 0:t.messages)?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p,{messages:t.messages}),Object(s.jsxs)("div",{style:{display:"flex",paddingTop:"3rem",alignItems:"center"},children:[Object(s.jsx)("div",{style:{width:"50%",padding:"1rem"},children:Object(s.jsx)(W,{messages:t.messages})}),Object(s.jsx)("div",{style:{width:"50%",padding:"1rem"},children:Object(s.jsx)(g,{messages:t.messages})})]}),Object(s.jsx)(k,{messages:t.messages})]}):Object(s.jsx)(s.Fragment,{})]})})}function W(e){var t=e.messages;t=t.sort((function(e,t){return e.timestamp_ms<t.timestamp_ms?-1:1}));var n=Math.ceil(t.length/((t[t.length-1].timestamp_ms-t[0].timestamp_ms)/864e5)),r=f.a.duration(f()(t[t.length-1].timestamp_ms).diff(f()(t[0].timestamp_ms))).humanize(),c=t.filter((function(e){return"Call"===e.type})).length,i=f.a.duration(f()(1e3*t.filter((function(e){return"Call"===e.type})).reduce((function(e,t){return e+t.call_duration}),0)).diff(f()(0))).humanize(),a=f.a.duration(f()(1e3*t.filter((function(e){return"Call"===e.type})).reduce((function(e,t){return e+t.call_duration}),0)/c).diff(f()(0))).humanize(),o=f.a.duration(f()(1e3*Math.max.apply(Math,Object(j.a)(t.filter((function(e){return"Call"===e.type})).map((function(e){return e.call_duration}))))).diff(f()(0))).humanize();return Object(s.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"300"},children:["You have spent ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:r})," interacting with each other, sharing an average of about ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:n})," interactions a day",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),t.find((function(e){return"Call"===e.type}))?Object(s.jsxs)(s.Fragment,{children:["You have called each other ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:c})," times, averaging ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:a})," each time and about ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:i})," in total",Object(s.jsx)("br",{}),"One time you spoke for ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:o})]}):Object(s.jsx)(s.Fragment,{children:"You have never called each other"})]})}var E=n(87),C=n.n(E),F=n(146);function D(e){var t=e.setAllMessages,n=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(r.useRef)(null),i=function(){return s(!0)},a=function(){return s(!1)};return Object(r.useEffect)((function(){var e=c.current;if(e)return e.addEventListener("mouseover",i),e.addEventListener("mouseout",a),function(){e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",a)}}),[c.current]),[c,n]}(),c=Object(l.a)(n,2),i=c[0],a=c[1],d=Object(r.useState)(0),u=Object(l.a)(d,2),h=u[0],m=u[1],b=Object(r.useState)(0),f=Object(l.a)(b,2),O=f[0],x=f[1],p=Object(r.useState)([]),g=Object(l.a)(p,2),y=g[0],v=g[1],w=function(e){v((function(t){return[].concat(Object(j.a)(t),[e])}))};return Object(r.useEffect)((function(){if(h===O){for(var e=function(e){var t=y[e],s=y.findIndex((function(n,s){return n.thread_path===t.thread_path&&s!==e}));s&&-1!==s&&(y[s]=Object(o.a)(Object(o.a)({},y[s]),{},{messages:[].concat(Object(j.a)(y[s].messages),Object(j.a)(t.messages))}),y.splice(e,1),e-=1),n=e},n=0;n<y.length;n++)e(n);t(y)}}),[h,O,y]),Object(s.jsxs)("div",{style:{backgroundColor:"#50C9CE",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",height:"100vh"},children:[Object(s.jsxs)("div",{style:{textAlign:"center",maxWidth:"50%"},children:[Object(s.jsxs)("h1",{style:{fontWeight:"300",padding:"3rem 3rem 1rem 3rem"},children:["Hello, and Welcome to ",Object(s.jsx)("span",{style:{color:"#EF709D"},children:"Facebook Messenger Viz"})]}),Object(s.jsx)("h4",{style:{fontWeight:"300"},children:"This site takes all of your past information, crunches it and provides some interesting stats. Don't worry -- it's safe and secure. Everything is run on your computer, and I never store anything related to you. You can check my opensource code if you want to make sure, or ask your grandson if he thinks its safe."})]}),Object(s.jsxs)("div",{style:{maxWidth:"50%",paddingBottom:"8rem",alignItems:"center",flexDirection:"column",display:"flex"},children:[Object(s.jsx)("h2",{style:{textAlign:"center"},children:"Let's get started!"}),Object(s.jsx)("h3",{style:{fontWeight:"300",padding:"0rem 0rem 4rem 0rem"},children:Object(s.jsxs)("ol",{children:[Object(s.jsxs)("li",{children:["Download Facebook Data: Go to ",Object(s.jsx)("a",{href:"https://www.facebook.com/dyi/",children:"https://www.facebook.com/dyi/"})]}),Object(s.jsx)("li",{children:"Select: DateRange: All time, Format: JSON, Media Quality: High"}),Object(s.jsx)("li",{children:"Select the Deselect all button"}),Object(s.jsx)("li",{children:"Click only on messages"}),Object(s.jsx)("li",{children:"Hit the Create File button"}),Object(s.jsx)("li",{children:"Wait a day or two"}),Object(s.jsxs)("li",{children:["Return to ",Object(s.jsx)("a",{href:"https://www.facebook.com/dyi/",children:"https://www.facebook.com/dyi/"})," and download"]}),Object(s.jsx)("li",{children:"Unzip the file: It will be a single zip with two zips inside of it."}),Object(s.jsx)("li",{children:"Unzip the second zip (doesn't have photos in the photos folder)"}),Object(s.jsx)("li",{children:"Upload the messages folder below!"})]})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{for:"file",style:{cursor:"pointer",color:"white",backgroundColor:a?"grey":"#EF709D",padding:"1rem",fontWeight:"200",transition:"250ms"},ref:i,children:"Upload"}),Object(s.jsx)("input",{id:"file",type:"file",name:"file",style:{display:"none"},onChange:function(e){!function(e){var t=e.files,n=e.setCount,s=e.addThreadRaw,r=e.setTotal,c=Object(j.a)(t).filter((function(e){return e.name.endsWith(".json")})).filter((function(e){return e.name.startsWith("message_")}));r(c.length),c.forEach((function(e,t){var r=new FileReader;r.onload=function(){var e=Object(F.a)(C.a.mark((function e(c){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){var e=r.result,c=JSON.parse(e);s(c),n(t+1)}),10);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(e)}))}({files:e.target.files,setCount:m,addThreadRaw:w,setTotal:x})},directory:"",webkitdirectory:""})]}),Object(s.jsx)("div",{children:0!==O&&Object(s.jsxs)("h2",{style:{textAlign:"center",fontWeight:"300",padding:"2rem"},children:[Object(s.jsx)("span",{style:{color:"#EF709D"},children:h})," / ",O]})})]})]})}function M(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),a=Object(l.a)(i,2),d=a[0],j=a[1],h=Object(r.useState)([]),m=Object(l.a)(h,2),b=m[0],f=m[1],O=Object(r.useState)({sortBy:{count:!0},filterBy:"",items:10}),x=Object(l.a)(O,2),p=x[0],g=x[1],y=Object(r.useState)(!1),v=Object(l.a)(y,2),w=v[0],k=v[1],W=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=n.map((function(e){var t={};return e.messages.forEach((function(e){t[e.sender_name]=t[e.sender_name]+1||1})),Object(o.a)(Object(o.a)({},e),{},{count:e.messages.length,messageSplit:t})})).sort((function(e,t){return p.sortBy.count?e.count>t.count?-1:1:0})).filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.title)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(p.filterBy.toLowerCase())}));g(Object(o.a)(Object(o.a)({},p),{},{items:10})),f(e),!w&&e.length>0&&(k(!0),W.current.scrollIntoView({behavior:"smooth"}))}),[n,p.sortBy,p.filterBy]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(D,{setAllMessages:c}),n&&Object(s.jsxs)("div",{style:{display:"flex"},children:[Object(s.jsxs)("div",{style:{width:"50%",height:"100vh"},ref:W,children:[Object(s.jsxs)("div",{style:{padding:"2rem",height:"90%"},children:[Object(s.jsx)("input",{style:{border:"#EF709D",borderWidth:"1px",borderStyle:"solid",height:"1.5rem",paddingLeft:"1rem",borderRadius:"1rem"},type:"text",name:"search",value:p.filterBy,onChange:function(e){g(Object(o.a)(Object(o.a)({},p),{},{filterBy:e.target.value}))}}),Object(s.jsx)("div",{style:{overflowY:"auto",height:"100%"},children:Object(s.jsx)(u.a,{pageStart:0,loadMore:function(){g(Object(o.a)(Object(o.a)({},p),{},{items:p.items+10}))},hasMore:p.items<b.length,loader:Object(s.jsx)(s.Fragment,{}),style:{display:"flex",flexWrap:"wrap"},useWindow:!1,children:b.slice(0,p.items).map((function(e,t){var n=e.title,r=e.messageSplit,c=e.count;e.id;return Object(s.jsxs)("div",{style:{backgroundColor:"#9883E5",width:"10rem",margin:"1rem",padding:"1rem",color:"white",display:"flex",justifyContent:"space-between",flexDirection:"column",cursor:"pointer"},onClick:function(){j(b[t])},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:n}),Object(s.jsxs)("div",{style:{paddingTop:"1rem"},children:[Object(s.jsx)("p",{children:"Total messages:"}),Object(s.jsx)("h2",{style:{fontWeight:"100",padding:"1rem",textAlign:"center"},children:c})]})]}),Object(s.jsx)(_,{messageSplit:r,count:c})]})}))})})]}),Object(s.jsxs)("div",{style:{textAlign:"center"},children:["Made with \u2764\ufe0f by ",Object(s.jsx)("a",{href:"www.lucolsthoorn.com",children:"Luc Olsthoorn"})]})]}),d?Object(s.jsx)(S,{data:d,close:function(){j(!1)}}):Object(s.jsx)(s.Fragment,{})]})]})}var _=function(e){var t=e.messageSplit,n=e.count,c=Object(r.useState)(!1),i=Object(l.a)(c,2),a=i[0],o=(i[1],n/6);return Object(s.jsx)("div",{style:{height:a?"100%":"5rem",overflowY:"auto"},children:Object.keys(t).sort((function(e,n){return t[e]>t[n]?-1:1})).map((function(e){return Object(s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:".25rem"},children:[Object(s.jsx)("div",{style:{width:"".concat(t[e]/o,"rem"),backgroundColor:"#50C9CE",height:"1.25rem"}}),Object(s.jsx)("div",{style:{fontSize:".75rem"},children:e})]})}))})};n(362);a.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(M,{})}),document.getElementById("root"))}},[[363,1,2]]]);
//# sourceMappingURL=main.7053d1e8.chunk.js.map